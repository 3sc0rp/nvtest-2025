"use strict";(()=>{var e={};e.id=984,e.ids=[984],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5315:e=>{e.exports=require("path")},3600:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>S,requestAsyncStorage:()=>x,routeModule:()=>v,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var a={};r.r(a),r.d(a,{POST:()=>c});var s=r(9303),i=r(8716),o=r(670),n=r(7070),p=r(1067);let u=require("fs");var d=r(5315),l=r.n(d);let m=p.Ry({name:p.Z_().min(2),email:p.Z_().email(),phone:p.Z_().min(7),partySize:p.Rx().int().min(1).max(20),date:p.Z_(),time:p.Z_(),notes:p.Z_().optional()});async function c(e){try{let t=await e.json(),r=m.parse({...t,partySize:Number(t.partySize)}),a=new Date(`${r.date}T${r.time}`);if(isNaN(a.getTime())||a<new Date)return n.NextResponse.json({error:"Past date/time"},{status:400});let s={id:Date.now().toString(),...r,createdAt:new Date().toISOString()},i=l().join(process.cwd(),"data","reservations.json"),o=[];try{let e=await u.promises.readFile(i,"utf-8");o=JSON.parse(e),Array.isArray(o)||(o=[])}catch{}return o.push(s),await u.promises.writeFile(i,JSON.stringify(o,null,2),"utf-8"),console.log("[reservations] confirmation email â†’",r.email,s),n.NextResponse.json({ok:!0,id:s.id})}catch(e){return console.error("[reservations] error",e),n.NextResponse.json({error:"Invalid request"},{status:400})}}let v=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/reservations/route",pathname:"/api/reservations",filename:"route",bundlePath:"app/api/reservations/route"},resolvedPagePath:"C:\\Users\\Drood\\Desktop\\ES-CORP\\nvtest-claude3\\app\\api\\reservations\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:x,staticGenerationAsyncStorage:h,serverHooks:g}=v,y="/api/reservations/route";function S(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,934],()=>r(3600));module.exports=a})();